FROM debian:12

RUN apt-get update
RUN apt-get install mariadb-server -y


EXPOSE 3306
#ENV WORDPRESS_DB_NAME="$${WORDPRESS_DB_NAME}"
# ENV WORDPRESS_DB_USER="${WORDPRESS_DB_USER}"
# ENV WORDPRESS_DB_PASSWORD="${WORDPRESS_DB_PASSWORD}"

RUN service mariadb start  \
	&& echo "CREATE DATABASE IF NOT EXISTS $${WORDPRESS_DB_NAME}" | mariadb \
	&& echo "CREATE USER IF NOT EXISTS '${WORDPRESS_DB_USER}'@'%' IDENTIFIED BY '${WORDPRESS_DB_PASSWORD}';\
				GRANT ALL PRIVILEGES ON ${WORDPRESS_DB_NAME}.* to '${WORDPRESS_DB_USER}'@'%';\
				FLUSH PRIVILEGES;" | mariadb

CMD ["mysqld"]

